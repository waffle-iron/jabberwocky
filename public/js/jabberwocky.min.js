"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(n,t,a){return t&&e(n.prototype,t),a&&e(n,a),n}}(),Template=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"load",value:function(e,n){var t=document.getElementById(e+"__template"),a=document.getElementById(n+"__container"),r=document.importNode(t.content,!0);return a.appendChild(r),this}},{key:"empty",value:function(e){return document.getElementById(e+"__container").innerHTML="",this}},{key:"observe",value:function(e,n,t){}},{key:"listen",value:function(e,n,t){document.getElementById(e+"__button").onclick=function(){n[t]()}}}]),e}(),_createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(n,t,a){return t&&e(n.prototype,t),a&&e(n,a),n}}(),User=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"register",value:function(){this.getValues("register")}},{key:"login",value:function(){this.getValues("login"),console.log(encryption.encrypt(this.email.value,"test"))}},{key:"logout",value:function(){}},{key:"getValues",value:function(e){this.email=document.getElementById(e+"_email__input"),this.password=document.getElementById(e+"_password__input")}}]),e}(),_createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(n,t,a){return t&&e(n.prototype,t),a&&e(n,a),n}}(),Encryption=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"encrypt",value:function(e,n){return CryptoJS.AES.encrypt(e,n).toString()}},{key:"decrypt",value:function(e,n){return CryptoJS.AES.decrypt(e,n).toString(CryptoJS.enc.Utf8)}}]),e}(),_createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(n,t,a){return t&&e(n.prototype,t),a&&e(n,a),n}}(),Message=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"send",value:function(){console.log("send")}},{key:"update",value:function(e,n){var t=document.getElementById(e),a=document.createElement("div"),r=document.createElement("span"),l=document.createElement("span"),o=document.createElement("span");a.className="msg",r.className="date",l.className="user",o.className="content";var c=new Date(n.date);c=c.getMonth()+1+"/"+c.getDate()+"/"+c.getFullYear();var s=document.createTextNode(n.user),i=document.createTextNode(c),u=document.createTextNode(Encryption.decrypt(n.message,n.user));r.appendChild(i),l.appendChild(s),o.appendChild(u),a.appendChild(l),a.appendChild(r),a.appendChild(o),t.appendChild(a),t.scrollTop=t.scrollHeight}}]),e}(),template=new Template,user=new User,message=new Message;template.empty("main").load("login","main").listen("login",user,"login"),template.load("register","main"),firebase.auth().onAuthStateChanged(function(e){e&&(template.empty("main").load("chat","main"),template.listen("chat",message,"send"))});var msgsRef=firebase.database().ref("messages/");msgsRef.on("child_added",function(e){message.update("chat__messages",e.val())});